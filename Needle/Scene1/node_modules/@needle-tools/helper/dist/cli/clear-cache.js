#!/usr/bin/env node
import { existsSync, rmSync } from 'fs';
import os from 'os';
// We run this as a separate script to avoid having any external dependencies
const npxCacheDirectory = os.platform() === 'win32' ? `${os.homedir()}\\AppData\\Local\\npm-cache\\_npx` : `${os.homedir()}/.npm/_npx`;
main();
function main() {
    const clearNpxCache = process.argv.includes("--npx");
    if (clearNpxCache) {
        deleteCacheDirectoryIfItExists(npxCacheDirectory);
    }
    else {
        console.log(`Provide a cache to clear. Use --npx to clear the npx cache.`);
    }
}
function deleteCacheDirectoryIfItExists(path) {
    if (existsSync(path)) {
        console.log(`Clearing cache...`);
        rmSync(path, { recursive: true, force: true });
        console.log(`Cache cleared successfully`);
    }
    else {
        console.log(`Cache is already empty`);
    }
}
