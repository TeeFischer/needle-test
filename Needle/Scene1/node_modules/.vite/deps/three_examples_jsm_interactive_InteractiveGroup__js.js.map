{
  "version": 3,
  "sources": ["../../@needle-tools/engine/node_modules/three/examples/jsm/interactive/InteractiveGroup.js"],
  "sourcesContent": ["import {\r\n\tGroup,\r\n\tRaycaster,\r\n\tVector2\r\n} from 'three';\r\n\r\nconst _pointer = new Vector2();\r\nconst _event = { type: '', data: _pointer };\r\n\r\nconst _raycaster = new Raycaster();\r\n\r\nclass InteractiveGroup extends Group {\r\n\r\n\tlistenToPointerEvents( renderer, camera ) {\r\n\r\n\t\tconst scope = this;\r\n\t\tconst raycaster = new Raycaster();\r\n\r\n\t\tconst element = renderer.domElement;\r\n\r\n\t\tfunction onPointerEvent( event ) {\r\n\r\n\t\t\tevent.stopPropagation();\r\n\r\n\t\t\tconst rect = renderer.domElement.getBoundingClientRect();\r\n\r\n\t\t\t_pointer.x = ( event.clientX - rect.left ) / rect.width * 2 - 1;\r\n\t\t\t_pointer.y = - ( event.clientY - rect.top ) / rect.height * 2 + 1;\r\n\r\n\t\t\traycaster.setFromCamera( _pointer, camera );\r\n\r\n\t\t\tconst intersects = raycaster.intersectObjects( scope.children, false );\r\n\r\n\t\t\tif ( intersects.length > 0 ) {\r\n\r\n\t\t\t\tconst intersection = intersects[ 0 ];\r\n\r\n\t\t\t\tconst object = intersection.object;\r\n\t\t\t\tconst uv = intersection.uv;\r\n\r\n\t\t\t\t_event.type = event.type;\r\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\r\n\r\n\t\t\t\tobject.dispatchEvent( _event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\telement.addEventListener( 'pointerdown', onPointerEvent );\r\n\t\telement.addEventListener( 'pointerup', onPointerEvent );\r\n\t\telement.addEventListener( 'pointermove', onPointerEvent );\r\n\t\telement.addEventListener( 'mousedown', onPointerEvent );\r\n\t\telement.addEventListener( 'mouseup', onPointerEvent );\r\n\t\telement.addEventListener( 'mousemove', onPointerEvent );\r\n\t\telement.addEventListener( 'click', onPointerEvent );\r\n\r\n\t}\r\n\r\n\tlistenToXRControllerEvents( controller ) {\r\n\r\n\t\tconst scope = this;\r\n\r\n\t\t// TODO: Dispatch pointerevents too\r\n\r\n\t\tconst events = {\r\n\t\t\t'move': 'mousemove',\r\n\t\t\t'select': 'click',\r\n\t\t\t'selectstart': 'mousedown',\r\n\t\t\t'selectend': 'mouseup'\r\n\t\t};\r\n\r\n\t\tfunction onXRControllerEvent( event ) {\r\n\r\n\t\t\tconst controller = event.target;\r\n\r\n\t\t\t_raycaster.setFromXRController( controller );\r\n\r\n\t\t\tconst intersections = _raycaster.intersectObjects( scope.children, false );\r\n\r\n\t\t\tif ( intersections.length > 0 ) {\r\n\r\n\t\t\t\tconst intersection = intersections[ 0 ];\r\n\r\n\t\t\t\tconst object = intersection.object;\r\n\t\t\t\tconst uv = intersection.uv;\r\n\r\n\t\t\t\t_event.type = events[ event.type ];\r\n\t\t\t\t_event.data.set( uv.x, 1 - uv.y );\r\n\r\n\t\t\t\tobject.dispatchEvent( _event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcontroller.addEventListener( 'move', onXRControllerEvent );\r\n\t\tcontroller.addEventListener( 'select', onXRControllerEvent );\r\n\t\tcontroller.addEventListener( 'selectstart', onXRControllerEvent );\r\n\t\tcontroller.addEventListener( 'selectend', onXRControllerEvent );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport { InteractiveGroup };\r\n"],
  "mappings": ";;;;;;;;AAMA,IAAM,WAAW,IAAI,QAAQ;AAC7B,IAAM,SAAS,EAAE,MAAM,IAAI,MAAM,SAAS;AAE1C,IAAM,aAAa,IAAI,UAAU;AAEjC,IAAM,mBAAN,cAA+B,MAAM;AAAA,EAEpC,sBAAuB,UAAU,QAAS;AAEzC,UAAM,QAAQ;AACd,UAAM,YAAY,IAAI,UAAU;AAEhC,UAAM,UAAU,SAAS;AAEzB,aAAS,eAAgB,OAAQ;AAEhC,YAAM,gBAAgB;AAEtB,YAAM,OAAO,SAAS,WAAW,sBAAsB;AAEvD,eAAS,KAAM,MAAM,UAAU,KAAK,QAAS,KAAK,QAAQ,IAAI;AAC9D,eAAS,IAAI,EAAI,MAAM,UAAU,KAAK,OAAQ,KAAK,SAAS,IAAI;AAEhE,gBAAU,cAAe,UAAU,MAAO;AAE1C,YAAM,aAAa,UAAU,iBAAkB,MAAM,UAAU,KAAM;AAErE,UAAK,WAAW,SAAS,GAAI;AAE5B,cAAM,eAAe,WAAY,CAAE;AAEnC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,MAAM;AACpB,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG,CAAE;AAEhC,eAAO,cAAe,MAAO;AAAA,MAE9B;AAAA,IAED;AAEA,YAAQ,iBAAkB,eAAe,cAAe;AACxD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,eAAe,cAAe;AACxD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,WAAW,cAAe;AACpD,YAAQ,iBAAkB,aAAa,cAAe;AACtD,YAAQ,iBAAkB,SAAS,cAAe;AAAA,EAEnD;AAAA,EAEA,2BAA4B,YAAa;AAExC,UAAM,QAAQ;AAId,UAAM,SAAS;AAAA,MACd,QAAQ;AAAA,MACR,UAAU;AAAA,MACV,eAAe;AAAA,MACf,aAAa;AAAA,IACd;AAEA,aAAS,oBAAqB,OAAQ;AAErC,YAAMA,cAAa,MAAM;AAEzB,iBAAW,oBAAqBA,WAAW;AAE3C,YAAM,gBAAgB,WAAW,iBAAkB,MAAM,UAAU,KAAM;AAEzE,UAAK,cAAc,SAAS,GAAI;AAE/B,cAAM,eAAe,cAAe,CAAE;AAEtC,cAAM,SAAS,aAAa;AAC5B,cAAM,KAAK,aAAa;AAExB,eAAO,OAAO,OAAQ,MAAM,IAAK;AACjC,eAAO,KAAK,IAAK,GAAG,GAAG,IAAI,GAAG,CAAE;AAEhC,eAAO,cAAe,MAAO;AAAA,MAE9B;AAAA,IAED;AAEA,eAAW,iBAAkB,QAAQ,mBAAoB;AACzD,eAAW,iBAAkB,UAAU,mBAAoB;AAC3D,eAAW,iBAAkB,eAAe,mBAAoB;AAChE,eAAW,iBAAkB,aAAa,mBAAoB;AAAA,EAE/D;AAED;",
  "names": ["controller"]
}
